<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Atipiko Web Store</title>
		<meta name="description" content="Atipiko es una tienda de productos poco usuales, llevan operando por años en el centro de Barcelona y han decidido dar su paso al mundo virtual." />
		<meta name="author" content="Raul Osuna Montes" />
		<link rel="stylesheet" href="general.css">  
  		<style type="text/css">
  			/* aside ficed con enlace a mensaje mail to*/
  			main{
  				padding: 5vh 0%;
  			}
  			main>section:first-of-type{
  				position: relative;
  				padding: 0 0%;
  				width: 100%;
  				height: 65vh;
  			}
  			main>section:first-of-type>div{
  				width: 100%;
  				height: 100%;
  				position: relative;
  				overflow: hidden;
  			}
  			main>section:first-of-type>div>article{
  				width: 100%;
  				height: 100%;
  				position: absolute;
  				transition: left 1s ease;
  				background-repeat: no-repeat;
  				background-size: 100% 100%;
  			}
  			main>section:first-of-type>div>article:first-of-type{
  				background-image: url("img/banner1.png");
  			}
  			main>section:first-of-type>div>article:nth-of-type(2){
  				background-image: url("img/banner2.png");
  			}
  			main>section:first-of-type>div>article:nth-of-type(3){
  				background-image: url("img/banner3.png");
  			}
  			main>section:first-of-type>button{
  				position: absolute;
    			bottom: 50%;
    			padding: 1%;
    			background-color: rgba(0,0,0,0.5);
    			border: none;
    			outline: none;
    			color:#fff;
    			transition: 0.5s
    		}
    		main>section:first-of-type>button:hover{
    			cursor: pointer;
    			background-color: rgba(255,255,255,0.5);
    			color: #000
    		}
    		main>section:first-of-type>button:first-of-type{
    			left: 0%;
    		}
    		main>section:first-of-type>button:last-of-type{
    			right: 0%;
    		}
    		main>section:not(:first-of-type){
    			padding: 5vh 5vw 0 5vw;
    		}
    		main>section:nth-of-type(2){
    			display: grid;
    			grid-template-columns: auto auto auto;

    		}
    		main>section:nth-of-type(2)>a{
    			height: 50vh;
    			background-repeat: no-repeat;
				background-size: 100% 110%;

    		}
			main>section:nth-of-type(2)>a:first-of-type{
    			background-image: url('img/regalos.png');
			}
			main>section:nth-of-type(2)>a:nth-of-type(2){
    			background-image: url('img/Zapatillas.png');
			}
			main>section:nth-of-type(2)>a:last-of-type{
    			background-image: url('img/camisetas.png');
    			
			}
    		main>section:nth-of-type(3)>section{
    			display: grid;
    			grid-template-columns: 20% 20% 20% 20%;
    			justify-content: space-around;
    		}
    		main>section:nth-of-type(3)>section>a{
    			text-decoration: none;
    			color: #000;
    			margin: 2%;
				transition: 0.5s ease;
				background-color: #fff;
				text-transform: uppercase;
			}
			main>section:nth-of-type(3)>section>a>figure{
				height: 100%;
			}
			/* Pruebas */
			main>section:nth-of-type(3)>section>a h4,main>section:nth-of-type(3)>section>a p{
				padding: 0% 5% 0 5%; 
			}
			main>section:nth-of-type(3)>section>a h4{
				text-align: left;
				width: 90%;
   				height: 50%;
			} 
			main>section:nth-of-type(3)>section>a p{
				text-align: right;
			} 
			main>section:nth-of-type(3)>section>a p{
				color: #f00;
				font-weight: bold;
			}
			main>section:nth-of-type(3)>section>a{
				border: 1px solid black;
				border-radius: 10px;
				overflow: hidden;
				filter: drop-shadow(2px 4px 6px black);
			}

			main>section:nth-of-type(3)>section>a>figure{
				grid-column: 1/3;
			}
			/* Fin pruebas */
			main>section:nth-of-type(3)>section>a>figure>img{
				height: 80%;
				border-bottom: 1px solid #000;
				box-sizing: border-box;

			}
			main>section:nth-of-type(3)>section>a>figure>figcaption{
				height: 20%;
			}
    		main>section:nth-of-type(3)>section>a:hover{
    			transform: scale(1.1);
    			z-index: 100
			}
			@media screen and (max-width: 1100px){
				main>section:nth-of-type(3)>section{
					grid-template-columns: 33% auto 33% ;
    			}
			}
			@media screen and (max-width: 900px){
				main>section:first-of-type {
					height: 38vh;
				}
			}
			@media screen and (max-width: 500px){
				main>section:nth-of-type(3)>section{
					grid-template-columns: 50% auto ;
				}
				main>section:nth-of-type(3)>section>a>figure{
					height: initial;
				}
				main>section:nth-of-type(3)>section>a>figure>img{
					height: initial;
				}
				main>section:nth-of-type(3)>section>a>figure>figcaption{
					height: initial;
					display: flex;
					flex-direction: column;
					align-items: flex-end;
				}
				main>section:nth-of-type(2)>a{
    			height: 35vh;
    		

				}
				

			}
  		</style>
	</head>
	<body>
		<header>
			<h1>
				Atipiko
				<!-- Nombre de la empresa -->
			</h1>
		</header>
		<nav>
			
		</nav>
		<main>
			<section id="slider">
				<!-- Slider imagenes -->
				<div>
					<article>
					</article>
					<article>
					</article>
					<article>
					</article>
				</div>
				<button onclick="slidercambio(false)"><</button>
				<button onclick="slidercambio(true)">></button>
			</section>
			<section>
				<a href="catalogo.html?cat=2">
				</a>
				<a href="catalogo.html?cat=1">
				</a>
				<a href="catalogo.html?cat=0">
				</a>
			</section>
			<section>
				<!-- mostrar productos destacados y esas mierdas -->
				<h2>Productos que podrian interesarte</h2>
				<section>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
					<a href="#">
						<figure>
							<img src="img/imagenprueba.jpg">
						</figure>
						<p>Nombre de cosa</p>
						<p>100,00€</p>
					</a>
				</section>
			</section>
		</main>
		<footer>
			<!-- <section>
				<ul>
					<li>Contacto</li>
				</ul>
			</section> -->
			<section>
				<a href="https://www.facebook.com/">
					<figure>
						<img src="img/facebook.svg">
					</figure>
				</a>
				<a href="https://www.twitter.com/">
					<figure>
						<img src="img/twitter.svg">
					</figure>
				<a href="https://www.instagram.com/">
					<figure>
						<img src="img/insta.svg">
					</figure>
				</a>
			</section>
			
		</footer>
		<script type="text/javascript" src="jsgeneral.js"></script>
		<script type="text/javascript">
			sliderinicial();
			destacados();

			/*
				Recibe: Nada
				Devuelve: Nada
				Accion: Coloca los elementos del Slider en la posicion inicial
			*/
			function sliderinicial(){
				 console.log(slider.children[0].children.length)
				 
				 var derecha=0;
				 slider.children[0].children[0].style.left=derecha+"%";
				 for (let i=1;i<slider.children[0].children.length;i++){
				 	derecha+=100;
				 	slider.children[0].children[i].style.left=derecha+"%";
				 }

			}
			/*
				Recibe: Lado a donde rotar (Boleano)
				Devuelve: Nada
				Accion: Rota los elementos del slider dependiendo del boelano recibido
			*/
			function slidercambio(lado){
				if(lado){
					console.log(">")
					if(document.querySelector("main>section:first-of-type>div>article:last-of-type").style.left!="0%"){
						var ultimo=0;
						for (let i=0;i<slider.children[0].children.length;i++){
							console.log(slider.children[0].children[i])
							slider.children[0].children[i].style.left=(parseInt(slider.children[0].children[i].style.left.split('%')[0])-100)+"%";
						}						
					}else{
						for (let i=0;i<slider.children[0].children.length;i++){
							slider.children[0].children[i].style.left=(100*parseInt(i))+"%"
						}
					}
				}else{
					console.log("<");
					if(document.querySelector("main>section:first-of-type>div>article:first-of-type").style.left!="0%"){
						for (let i=0;i<slider.children[0].children.length;i++){
							console.log(slider.children[0].children[i])
							slider.children[0].children[i].style.left=(parseInt(slider.children[0].children[i].style.left.split('%')[0])+100)+"%"
						}
					}else{
						var cont=0;
						for (let i=slider.children[0].children.length-1;i>=0;i--){
							console.log(i)
							slider.children[0].children[i].style.left=(100*parseInt(cont)*-1)+"%";
							cont++;
						}
					}
					

				}
			}
			/*
				Recibe: Nada
				Devuelve: Nada
				Accion: Coloca 8 productos, alazar, guardados en un array de productos, no se repiten
			*/
			function destacados(){
				var categoria=parseInt(aleatorio(productos.length-1,0))
				var productorandom=parseInt(aleatorio(productos[categoria].length-1,0))
				console.log(productos[categoria][productorandom])
				var html="";
				var echos=[];
				 for(let i=0;i<8;i++){
				 	do{
				 		console.log(echos)
					 	categoria=parseInt(aleatorio(productos.length-1,0))
					 	productorandom=parseInt(aleatorio(productos[categoria].length-1,0))
					}while(echos.indexOf(categoria+" "+productorandom)!=-1);
					echos.push(categoria+" "+productorandom)
				 	html+="<a href='producto.html?cat="+categoria+"&pro="+productorandom+"'>";
				 	html+="<figure>";
				 	html+="<img src='"+productos[categoria][productorandom][0]+"' alt='"+productos[categoria][productorandom][1]+"' title='"+productos[categoria][productorandom][1]+"'>";
					html+="<figcaption>"
				 	html+="<h4>"+productos[categoria][productorandom][1]+"</h4>";
					html+="<p>"+productos[categoria][productorandom][2]+"€</p>";
					html+="</figcaption>"
					html+="</figure>";
				 	html+="</a>";

				 }
				//  console.log(document.querySelector("main>section:nth-of-type(3)>section"))
				 document.querySelector("main>section:nth-of-type(3)>section").innerHTML=html;
			}
		</script>
	</body>
</html>